"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3246],{4976:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"control-commands/prompt-customization","title":"Prompt Customization","description":"Customize your shell prompt to display the active DVS application.","source":"@site/docs/02-control-commands/prompt-customization.md","sourceDirName":"02-control-commands","slug":"/control-commands/prompt-customization","permalink":"/docs/control-commands/prompt-customization","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1763636238000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"dvs login","permalink":"/docs/control-commands/login"},"next":{"title":"dvs remove","permalink":"/docs/control-commands/remove"}}');var s=t(4848),o=t(8453);const r={},a="Prompt Customization",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Automatic Prompt Integration",id:"automatic-prompt-integration",level:2},{value:"Disabling the Prompt Indicator",id:"disabling-the-prompt-indicator",level:2},{value:"Custom Prompt Integration",id:"custom-prompt-integration",level:2},{value:"Starship",id:"starship",level:3},{value:"OhMyZsh",id:"ohmyzsh",level:3},{value:"Other Custom Prompts",id:"other-custom-prompts",level:3},{value:"Environment Variable",id:"environment-variable",level:2},{value:"DVS_PROMPT_DISABLE",id:"dvs_prompt_disable",level:3},{value:"Updating the Prompt",id:"updating-the-prompt",level:2},{value:"See Also",id:"see-also",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"prompt-customization",children:"Prompt Customization"})}),"\n",(0,s.jsx)(n.p,{children:"Customize your shell prompt to display the active DVS application."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["When you activate an application with ",(0,s.jsx)(n.code,{children:"dvs activate <app>"}),", DVS automatically adds an indicator to your shell prompt showing the active app name: ",(0,s.jsx)(n.code,{children:"(dvs:app-name)"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"This indicator is compatible with most shell configurations and custom prompts (OhMyZsh, Starship, etc.)."}),"\n",(0,s.jsx)(n.h2,{id:"automatic-prompt-integration",children:"Automatic Prompt Integration"}),"\n",(0,s.jsxs)(n.p,{children:["The prompt indicator is automatically added by the DVS wrapper script (",(0,s.jsx)(n.code,{children:"~/.config/devspaces/helpers/wrapper.sh"}),") when:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["An app is activated (",(0,s.jsx)(n.code,{children:"dvs activate <app>"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"DVS_PROMPT_DISABLE"})," environment variable is not set to ",(0,s.jsx)(n.code,{children:"1"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The integration uses shell hooks to avoid breaking custom prompts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bash"}),": Uses ",(0,s.jsx)(n.code,{children:"PROMPT_COMMAND"})," hook"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Zsh"}),": Uses ",(0,s.jsx)(n.code,{children:"precmd"})," hook via ",(0,s.jsx)(n.code,{children:"add-zsh-hook"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fish"}),": Wraps the ",(0,s.jsx)(n.code,{children:"fish_prompt"})," function"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"disabling-the-prompt-indicator",children:"Disabling the Prompt Indicator"}),"\n",(0,s.jsxs)(n.p,{children:["To disable the automatic prompt indicator, set the ",(0,s.jsx)(n.code,{children:"DVS_PROMPT_DISABLE"})," environment variable:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export DVS_PROMPT_DISABLE=1\n"})}),"\n",(0,s.jsx)(n.p,{children:"To re-enable it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"unset DVS_PROMPT_DISABLE\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can also add this to your shell configuration file to make it permanent:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# In ~/.bashrc, ~/.zshrc, or ~/.config/fish/config.fish\nexport DVS_PROMPT_DISABLE=1\n"})}),"\n",(0,s.jsx)(n.h2,{id:"custom-prompt-integration",children:"Custom Prompt Integration"}),"\n",(0,s.jsx)(n.h3,{id:"starship",children:"Starship"}),"\n",(0,s.jsxs)(n.p,{children:["For a more integrated experience with Starship, you can add a custom module to your ",(0,s.jsx)(n.code,{children:"~/.config/starship.toml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[custom.dvs]\ncommand = "cat ~/.config/devspaces/config 2>/dev/null | grep \'^DVS_ACTIVE_APP=\' | cut -d\'=\' -f2"\nwhen = "test -f ~/.config/devspaces/config"\nformat = "[$symbol($output )]($style)"\nsymbol = "\ud83c\udd50 "\nstyle = "bold green"\n'})}),"\n",(0,s.jsx)(n.p,{children:"This will display the active app name with a custom symbol and styling that matches your Starship theme."}),"\n",(0,s.jsx)(n.h3,{id:"ohmyzsh",children:"OhMyZsh"}),"\n",(0,s.jsxs)(n.p,{children:["For OhMyZsh themes, you can customize the prompt by adding to your ",(0,s.jsx)(n.code,{children:"~/.zshrc"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# DVS app indicator for OhMyZsh\n_dvs_prompt_app() {\n    if [ -f ~/.config/devspaces/config ]; then\n        source ~/.config/devspaces/config\n        if [ -n "$DVS_ACTIVE_APP" ]; then\n            echo "%F{green}(dvs:$DVS_ACTIVE_APP)%f "\n        fi\n    fi\n}\n\n# Add to your theme\'s prompt (example for robbyrussell theme)\n# PROMPT=\'$(_dvs_prompt_app)\'$PROMPT\n'})}),"\n",(0,s.jsx)(n.p,{children:"Or integrate it into a custom theme function that's called by your theme."}),"\n",(0,s.jsx)(n.h3,{id:"other-custom-prompts",children:"Other Custom Prompts"}),"\n",(0,s.jsx)(n.p,{children:"For other custom prompt systems, you need to read the active app dynamically each time the prompt is displayed. Here are examples for different shells:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Bash:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Function to get active app (called before each prompt)\n_dvs_get_active_app() {\n    if [ -f ~/.config/devspaces/config ]; then\n        # Read DVS_ACTIVE_APP from config file\n        DVS_ACTIVE_APP=$(grep '^DVS_ACTIVE_APP=' ~/.config/devspaces/config 2>/dev/null | cut -d'=' -f2)\n        if [ -n \"$DVS_ACTIVE_APP\" ]; then\n            echo \"(dvs:$DVS_ACTIVE_APP) \"\n        fi\n    fi\n}\n\n# Add to PROMPT_COMMAND to update prompt dynamically\nPROMPT_COMMAND='DVS_APP_INDICATOR=$(_dvs_get_active_app); '\"$PROMPT_COMMAND\"\n\n# Use in your prompt\nPS1='$DVS_APP_INDICATOR'\"$PS1\"\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Zsh:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Function to get active app (called before each prompt)\n_dvs_get_active_app() {\n    if [ -f ~/.config/devspaces/config ]; then\n        DVS_ACTIVE_APP=$(grep '^DVS_ACTIVE_APP=' ~/.config/devspaces/config 2>/dev/null | cut -d'=' -f2)\n        if [ -n \"$DVS_ACTIVE_APP\" ]; then\n            echo \"%F{green}(dvs:$DVS_ACTIVE_APP)%f \"\n        fi\n    fi\n}\n\n# Add to precmd hook\nautoload -Uz add-zsh-hook\nadd-zsh-hook precmd _dvs_update_prompt\n_dvs_update_prompt() {\n    DVS_APP_INDICATOR=$(_dvs_get_active_app)\n}\n\n# Use in your prompt\nPROMPT='$DVS_APP_INDICATOR'\"$PROMPT\"\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Fish:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-fish",children:"# Function to get active app\nfunction _dvs_get_active_app\n    if test -f ~/.config/devspaces/config\n        set -l active_app (grep '^DVS_ACTIVE_APP=' ~/.config/devspaces/config 2>/dev/null | cut -d'=' -f2)\n        if test -n \"$active_app\"\n            echo -n \"(dvs:$active_app) \"\n        end\n    end\nend\n\n# Use in fish_prompt\nfunction fish_prompt\n    echo -n (_dvs_get_active_app)\n    # ... rest of your prompt\nend\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," The key is to read the config file dynamically each time the prompt is displayed, not just once at shell startup. This ensures the indicator updates immediately when you run ",(0,s.jsx)(n.code,{children:"activate"})," or ",(0,s.jsx)(n.code,{children:"deactivate"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"environment-variable",children:"Environment Variable"}),"\n",(0,s.jsx)(n.h3,{id:"dvs_prompt_disable",children:"DVS_PROMPT_DISABLE"}),"\n",(0,s.jsx)(n.p,{children:"Controls whether the automatic prompt indicator is displayed."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Default"}),": ",(0,s.jsx)(n.code,{children:"0"})," (prompt indicator enabled)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Values"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"0"})," or unset: Prompt indicator is shown when an app is active"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"1"}),": Prompt indicator is disabled"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Disable prompt indicator\nexport DVS_PROMPT_DISABLE=1\n\n# Re-enable prompt indicator\nunset DVS_PROMPT_DISABLE\n# or\nexport DVS_PROMPT_DISABLE=0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"updating-the-prompt",children:"Updating the Prompt"}),"\n",(0,s.jsx)(n.p,{children:"After activating or deactivating an app, the prompt indicator updates automatically. However, if you don't see the change:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Restart your shell"})," (open a new terminal)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Or reload the wrapper script:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source ~/.config/devspaces/helpers/wrapper.sh\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/control-commands/activate",children:"dvs activate"})," - Activate an application"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/control-commands/deactivate",children:"dvs deactivate"})," - Deactivate the active app"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);