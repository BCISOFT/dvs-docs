"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8941],{8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>l});var s=n(6540);const r={},a=s.createContext(r);function t(e){const i=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:i},e.children)}},9928:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"recipes/prestashop/img-proxy","title":"img-proxy","description":"La fonctionnalit\xe9 de proxy d\'images permet de rediriger les requ\xeates d\'images vers un domaine distant (g\xe9n\xe9ralement la production) via un proxy inverse Apache. C\'est utile pour les environnements de d\xe9veloppement o\xf9 vous souhaitez utiliser les images de production sans les t\xe9l\xe9charger localement.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/07-recipes/prestashop/img-proxy.md","sourceDirName":"07-recipes/prestashop","slug":"/recipes/prestashop/img-proxy","permalink":"/fr/docs/recipes/prestashop/img-proxy","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1764801662000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"employee-password","permalink":"/fr/docs/recipes/prestashop/employee-password"},"next":{"title":"update-appconfig","permalink":"/fr/docs/recipes/prestashop/update-appconfig"}}');var r=n(4848),a=n(8453);const t={},l="img-proxy",d={},o=[{value:"Fonctionnement",id:"fonctionnement",level:2},{value:"Commandes",id:"commandes",level:2},{value:"Status",id:"status",level:3},{value:"Set domain",id:"set-domain",level:3},{value:"Enable",id:"enable",level:3},{value:"Disable",id:"disable",level:3},{value:"Toggle",id:"toggle",level:3},{value:"Exemple d&#39;utilisation",id:"exemple-dutilisation",level:2},{value:"D\xe9tails techniques",id:"d\xe9tails-techniques",level:2}];function c(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"img-proxy",children:"img-proxy"})}),"\n",(0,r.jsx)(i.p,{children:"La fonctionnalit\xe9 de proxy d'images permet de rediriger les requ\xeates d'images vers un domaine distant (g\xe9n\xe9ralement la production) via un proxy inverse Apache. C'est utile pour les environnements de d\xe9veloppement o\xf9 vous souhaitez utiliser les images de production sans les t\xe9l\xe9charger localement."}),"\n",(0,r.jsx)(i.h2,{id:"fonctionnement",children:"Fonctionnement"}),"\n",(0,r.jsx)(i.p,{children:"Lorsqu'il est activ\xe9, Apache intercepte les requ\xeates d'images correspondant \xe0 des motifs sp\xe9cifiques et les redirige vers le domaine distant configur\xe9. Les types d'images suivants sont proxifi\xe9s :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["URLs d'images directes : ",(0,r.jsx)(i.code,{children:"/img/*"})," (jpg, jpeg, png, gif, webp, avif)"]}),"\n",(0,r.jsx)(i.li,{children:"URLs SEO produits : URLs conviviales PrestaShop pour les produits (1 \xe0 7 chiffres)"}),"\n",(0,r.jsx)(i.li,{children:"URLs SEO cat\xe9gories : Images de cat\xe9gories avec diff\xe9rents motifs d'URL"}),"\n",(0,r.jsxs)(i.li,{children:["Images Fancybox : images ",(0,r.jsx)(i.code,{children:"/images_ie/*"})]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Les fichiers locaux ont la priorit\xe9 : si une image existe localement, elle est servie directement sans proxy."}),"\n",(0,r.jsx)(i.h2,{id:"commandes",children:"Commandes"}),"\n",(0,r.jsx)(i.h3,{id:"status",children:"Status"}),"\n",(0,r.jsx)(i.p,{children:"Afficher la configuration actuelle du proxy d'images :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"dvs img-proxy status\n"})}),"\n",(0,r.jsx)(i.p,{children:"Affiche :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Domaine actuel (si d\xe9fini)"}),"\n",(0,r.jsx)(i.li,{children:"Mode proxy d'images (activ\xe9/d\xe9sactiv\xe9)"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"set-domain",children:"Set domain"}),"\n",(0,r.jsx)(i.p,{children:"Configurer le domaine distant depuis lequel proxifier les images :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"dvs img-proxy set-domain <domain>\n"})}),"\n",(0,r.jsx)(i.p,{children:"Exemple :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"dvs img-proxy set-domain shop.example.com\n"})}),"\n",(0,r.jsx)(i.p,{children:"Si le proxy est d\xe9j\xe0 activ\xe9, Apache sera recharg\xe9 automatiquement apr\xe8s la d\xe9finition du domaine."}),"\n",(0,r.jsx)(i.h3,{id:"enable",children:"Enable"}),"\n",(0,r.jsx)(i.p,{children:"Activer le mode proxy d'images. N\xe9cessite qu'un domaine soit d\xe9fini au pr\xe9alable :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"dvs img-proxy enable\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Si aucun domaine n'est configur\xe9, vous serez invit\xe9 \xe0 en d\xe9finir un avec ",(0,r.jsx)(i.code,{children:"set-domain"}),"."]}),"\n",(0,r.jsx)(i.h3,{id:"disable",children:"Disable"}),"\n",(0,r.jsx)(i.p,{children:"D\xe9sactiver le mode proxy d'images :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"dvs img-proxy disable\n"})}),"\n",(0,r.jsx)(i.h3,{id:"toggle",children:"Toggle"}),"\n",(0,r.jsx)(i.p,{children:"Basculer le mode proxy d'images activ\xe9/d\xe9sactiv\xe9 :"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"dvs img-proxy toggle\n"})}),"\n",(0,r.jsx)(i.p,{children:"Si l'activation est demand\xe9e et qu'aucun domaine n'est d\xe9fini, vous serez invit\xe9 \xe0 en configurer un d'abord."}),"\n",(0,r.jsx)(i.h2,{id:"exemple-dutilisation",children:"Exemple d'utilisation"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# V\xe9rifier l'\xe9tat actuel\ndvs img-proxy status\n\n# Configurer le domaine distant\ndvs img-proxy set-domain production.example.com\n\n# Activer le proxy\ndvs img-proxy enable\n\n# Plus tard, le d\xe9sactiver\ndvs img-proxy disable\n"})}),"\n",(0,r.jsx)(i.h2,{id:"d\xe9tails-techniques",children:"D\xe9tails techniques"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Apache est recharg\xe9 automatiquement lors de l'activation/d\xe9sactivation ou du changement de domaine"}),"\n",(0,r.jsx)(i.li,{children:"Le proxy utilise SSL/TLS pour se connecter au domaine distant"}),"\n",(0,r.jsx)(i.li,{children:"Seules les requ\xeates d'images sont proxifi\xe9es ; les fichiers locaux (CSS, JS, images de th\xe8me) sont servis normalement"}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);