"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6966],{5117:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"admin-commands/prune","title":"dvs prune","description":"Supprimer les bases de donn\xe9es, utilisateurs et configurations d\'applications orphelins.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/04-admin-commands/prune.md","sourceDirName":"04-admin-commands","slug":"/admin-commands/prune","permalink":"/fr/docs/admin-commands/prune","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1764262326000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"dvs poweron","permalink":"/fr/docs/admin-commands/poweron"},"next":{"title":"dvs recipes","permalink":"/fr/docs/admin-commands/recipes"}}');var r=n(4848),t=n(8453);const d={},o="dvs prune",l={},a=[{value:"Description",id:"description",level:2},{value:"Utilisation",id:"utilisation",level:2},{value:"Options",id:"options",level:3},{value:"Notes importantes",id:"notes-importantes",level:2},{value:"Exemples",id:"exemples",level:2},{value:"Utilisation de base",id:"utilisation-de-base",level:3},{value:"Mode dry-run",id:"mode-dry-run",level:3},{value:"Commandes associ\xe9es",id:"commandes-associ\xe9es",level:2}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"dvs-prune",children:"dvs prune"})}),"\n",(0,r.jsx)(s.p,{children:"Supprimer les bases de donn\xe9es, utilisateurs et configurations d'applications orphelins."}),"\n",(0,r.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["La commande ",(0,r.jsx)(s.code,{children:"prune"})," identifie et supprime les ressources orphelines qui ne sont plus r\xe9f\xe9renc\xe9es par des applications valides :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Bases de donn\xe9es MySQL/MariaDB orphelines"})," : Bases de donn\xe9es qui ne sont r\xe9f\xe9renc\xe9es par aucune application install\xe9e"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Utilisateurs SQL orphelins"})," : Utilisateurs MySQL/MariaDB qui ne sont r\xe9f\xe9renc\xe9s par aucune application install\xe9e"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Configurations d'applications orphelines"})," : Dossiers de configuration d'applications dont les r\xe9pertoires ",(0,r.jsx)(s.code,{children:"APP_ROOT"})," ou ",(0,r.jsx)(s.code,{children:"APP_WEB_ROOT"})," n'existent plus"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"La commande analyse toutes les configurations d'applications et v\xe9rifie que les r\xe9pertoires existent. Seules les applications avec des configurations valides et des r\xe9pertoires existants sont consid\xe9r\xe9es comme valides."}),"\n",(0,r.jsx)(s.h2,{id:"utilisation",children:"Utilisation"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"dvs prune [--dry-run]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"options",children:"Options"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"--dry-run"})," : Affiche ce qui serait supprim\xe9 sans r\xe9ellement supprimer quoi que ce soit ni demander de confirmation. Utile pour pr\xe9visualiser les r\xe9sultats avant d'ex\xe9cuter la commande prune r\xe9elle."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"notes-importantes",children:"Notes importantes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Interactif"})," : La commande permet de s\xe9lectionner quelles ressources supprimer via une interface de s\xe9lection multiple (sauf si ",(0,r.jsx)(s.code,{children:"--dry-run"})," est utilis\xe9)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"S\xe9lectif"})," : Vous pouvez choisir de supprimer toutes les ressources d'un coup ou s\xe9lectionner des ressources sp\xe9cifiques individuellement"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"S\xfbr"})," : Seules les ressources non r\xe9f\xe9renc\xe9es par des applications valides sont propos\xe9es \xe0 la suppression"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Gestion des services"})," : La commande d\xe9marre automatiquement les services MySQL/MariaDB s'ils ne sont pas en cours d'ex\xe9cution"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Mode dry-run"})," : Utilisez ",(0,r.jsx)(s.code,{children:"--dry-run"})," pour pr\xe9visualiser ce qui serait supprim\xe9 sans effectuer de modifications"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"exemples",children:"Exemples"}),"\n",(0,r.jsx)(s.h3,{id:"utilisation-de-base",children:"Utilisation de base"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"$ dvs prune\n\nPrune Analysis:\n\nOrphaned databases:\n  - old_app_db\n  - test_db\n\nOrphaned SQL users:\n  - old_app_user\n  - test_user\n\nSelect resources to delete (space to toggle, enter to confirm):\n  [\u2713] All\n  [ ] app:pipobimbo\n  [ ] db:old_app_db\n  [ ] db:test_db\n  [ ] user:old_app_user\n  [ ] user:test_user\n  [ ] Cancel\n\nDeleting orphaned resources...\nDeleting database old_app_db ... \u2714\nDeleting database test_db ... \u2714\nDeleting user old_app_user ... \u2714\nDeleting user test_user ... \u2714\n\nPrune completed.\n"})}),"\n",(0,r.jsx)(s.h3,{id:"mode-dry-run",children:"Mode dry-run"}),"\n",(0,r.jsx)(s.p,{children:"Pr\xe9visualisez ce qui serait supprim\xe9 sans effectuer de modifications :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"$ dvs prune --dry-run\n\nPrune Analysis:\n\nOrphaned databases:\n  - old_app_db (from mysql-8.0)\n  - test_db (from mysql-8.0)\n\nOrphaned SQL users:\n  - old_app_user (from mysql-8.0)\n  - test_user (from mysql-8.0)\n\nDry-run mode: The following resources would be deleted:\n\nOrphaned databases:\n  - old_app_db (from mysql-8.0)\n  - test_db (from mysql-8.0)\n\nOrphaned SQL users:\n  - old_app_user (from mysql-8.0)\n  - test_user (from mysql-8.0)\n\nNo changes were made (dry-run mode).\n"})}),"\n",(0,r.jsx)(s.h2,{id:"commandes-associ\xe9es",children:"Commandes associ\xe9es"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"dvs mysqlconsole"})," - Acc\xe8s root \xe0 MySQL/MariaDB"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"dvs status"})," - Liste les services et applications avec leur statut"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>o});var i=n(6540);const r={},t=i.createContext(r);function d(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);