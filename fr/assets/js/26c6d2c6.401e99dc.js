"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1245],{1724:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"recipes/wordpress/img-proxy","title":"img-proxy","description":"La fonctionnalit\xe9 de proxy d\'images permet de rediriger les requ\xeates d\'images vers un domaine distant (g\xe9n\xe9ralement la production) via un proxy inverse Apache. C\'est utile pour les environnements de d\xe9veloppement o\xf9 vous souhaitez utiliser les images de production sans les t\xe9l\xe9charger localement.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/07-recipes/wordpress/img-proxy.md","sourceDirName":"07-recipes/wordpress","slug":"/recipes/wordpress/img-proxy","permalink":"/fr/docs/recipes/wordpress/img-proxy","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1769614288000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"debug-mode","permalink":"/fr/docs/recipes/wordpress/debug-mode"},"next":{"title":"maintenance","permalink":"/fr/docs/recipes/wordpress/maintenance"}}');var r=i(4848),l=i(8453);const d={},t="img-proxy",a={},o=[{value:"Fonctionnement",id:"fonctionnement",level:2},{value:"Commandes",id:"commandes",level:2},{value:"Status",id:"status",level:3},{value:"Set domain",id:"set-domain",level:3},{value:"Enable",id:"enable",level:3},{value:"Disable",id:"disable",level:3},{value:"Toggle",id:"toggle",level:3},{value:"Exemple d&#39;utilisation",id:"exemple-dutilisation",level:2},{value:"D\xe9tails techniques",id:"d\xe9tails-techniques",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"img-proxy",children:"img-proxy"})}),"\n",(0,r.jsx)(n.p,{children:"La fonctionnalit\xe9 de proxy d'images permet de rediriger les requ\xeates d'images vers un domaine distant (g\xe9n\xe9ralement la production) via un proxy inverse Apache. C'est utile pour les environnements de d\xe9veloppement o\xf9 vous souhaitez utiliser les images de production sans les t\xe9l\xe9charger localement."}),"\n",(0,r.jsx)(n.h2,{id:"fonctionnement",children:"Fonctionnement"}),"\n",(0,r.jsxs)(n.p,{children:["Lorsqu'il est activ\xe9, Apache intercepte les requ\xeates d'images vers ",(0,r.jsx)(n.code,{children:"wp-content/uploads"})," et les redirige vers le domaine distant configur\xe9. Les fichiers locaux ont la priorit\xe9 : si une image existe localement, elle est servie directement sans proxy."]}),"\n",(0,r.jsxs)(n.p,{children:["Lors de l'utilisation d'img-proxy, le workflow ",(0,r.jsx)(n.code,{children:"dvs pull --files"})," peut exclure ",(0,r.jsx)(n.code,{children:"wp-content/uploads"})," pour \xe9viter de synchroniser de gros r\xe9pertoires de m\xe9dias."]}),"\n",(0,r.jsx)(n.h2,{id:"commandes",children:"Commandes"}),"\n",(0,r.jsx)(n.h3,{id:"status",children:"Status"}),"\n",(0,r.jsx)(n.p,{children:"Afficher la configuration actuelle du proxy d'images :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dvs img-proxy status\n"})}),"\n",(0,r.jsx)(n.p,{children:"Affiche :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Domaine actuel (si d\xe9fini)"}),"\n",(0,r.jsx)(n.li,{children:"Mode proxy d'images (activ\xe9/d\xe9sactiv\xe9)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"set-domain",children:"Set domain"}),"\n",(0,r.jsx)(n.p,{children:"Configurer le domaine distant depuis lequel proxifier les images :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dvs img-proxy set-domain <domain>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Exemple :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dvs img-proxy set-domain mysite.example.com\n"})}),"\n",(0,r.jsx)(n.p,{children:"Si le proxy est d\xe9j\xe0 activ\xe9, Apache sera recharg\xe9 automatiquement apr\xe8s la d\xe9finition du domaine."}),"\n",(0,r.jsx)(n.h3,{id:"enable",children:"Enable"}),"\n",(0,r.jsx)(n.p,{children:"Activer le mode proxy d'images. N\xe9cessite qu'un domaine soit d\xe9fini au pr\xe9alable :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dvs img-proxy enable\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Si aucun domaine n'est configur\xe9, vous serez invit\xe9 \xe0 en d\xe9finir un avec ",(0,r.jsx)(n.code,{children:"set-domain"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"disable",children:"Disable"}),"\n",(0,r.jsx)(n.p,{children:"D\xe9sactiver le mode proxy d'images :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dvs img-proxy disable\n"})}),"\n",(0,r.jsx)(n.h3,{id:"toggle",children:"Toggle"}),"\n",(0,r.jsx)(n.p,{children:"Basculer le mode proxy d'images activ\xe9/d\xe9sactiv\xe9 :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dvs img-proxy toggle\n"})}),"\n",(0,r.jsx)(n.p,{children:"Si l'activation est demand\xe9e et qu'aucun domaine n'est d\xe9fini, vous serez invit\xe9 \xe0 en configurer un d'abord."}),"\n",(0,r.jsx)(n.h2,{id:"exemple-dutilisation",children:"Exemple d'utilisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier l'\xe9tat actuel\ndvs img-proxy status\n\n# Configurer le domaine distant\ndvs img-proxy set-domain production.example.com\n\n# Activer le proxy\ndvs img-proxy enable\n\n# Plus tard, le d\xe9sactiver\ndvs img-proxy disable\n"})}),"\n",(0,r.jsx)(n.h2,{id:"d\xe9tails-techniques",children:"D\xe9tails techniques"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Apache est recharg\xe9 automatiquement lors de l'activation/d\xe9sactivation ou du changement de domaine"}),"\n",(0,r.jsxs)(n.li,{children:["Le proxy cible ",(0,r.jsx)(n.code,{children:"wp-content/uploads"})," sur le domaine distant"]}),"\n",(0,r.jsx)(n.li,{children:"Seules les requ\xeates d'images sont proxifi\xe9es ; les fichiers locaux sont servis normalement"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>t});var s=i(6540);const r={},l=s.createContext(r);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);