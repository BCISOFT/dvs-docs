"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1854],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},9615:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"faq/scripting","title":"Scripts & Int\xe9gration IA","description":"Cette page explique comment utiliser DevSpaces dans des contextes non-interactifs comme les scripts, les pipelines CI/CD ou les outils de d\xe9veloppement assist\xe9s par IA.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/09-faq/scripting.md","sourceDirName":"09-faq","slug":"/faq/scripting","permalink":"/fr/docs/faq/scripting","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1769614288000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Permissions","permalink":"/fr/docs/faq/permissions"},"next":{"title":"Windows WSL2","permalink":"/fr/docs/faq/windows-wsl2"}}');var t=s(4848),l=s(8453);const r={},o="Scripts & Int\xe9gration IA",d={},a=[{value:"Le probl\xe8me",id:"le-probl\xe8me",level:2},{value:"Solution : DVS_NO_TTY",id:"solution--dvs_no_tty",level:2},{value:"Ce que \xe7a fait",id:"ce-que-\xe7a-fait",level:3},{value:"Priorit\xe9 de d\xe9tection",id:"priorit\xe9-de-d\xe9tection",level:3},{value:"Configuration des alias",id:"configuration-des-alias",level:2},{value:"Exemples d&#39;utilisation",id:"exemples-dutilisation",level:3},{value:"Outils de d\xe9veloppement IA",id:"outils-de-d\xe9veloppement-ia",level:2},{value:"Cursor / Claude Code",id:"cursor--claude-code",level:3},{value:"Pipelines CI/CD",id:"pipelines-cicd",level:3},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"Flags des outils externes",id:"flags-des-outils-externes",level:3},{value:"D\xe9pannage",id:"d\xe9pannage",level:2},{value:"La commande se bloque ?",id:"la-commande-se-bloque-",level:3},{value:"Besoin de couleurs dans la sortie ?",id:"besoin-de-couleurs-dans-la-sortie-",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"scripts--int\xe9gration-ia",children:"Scripts & Int\xe9gration IA"})}),"\n",(0,t.jsx)(n.p,{children:"Cette page explique comment utiliser DevSpaces dans des contextes non-interactifs comme les scripts, les pipelines CI/CD ou les outils de d\xe9veloppement assist\xe9s par IA."}),"\n",(0,t.jsx)(n.h2,{id:"le-probl\xe8me",children:"Le probl\xe8me"}),"\n",(0,t.jsx)(n.p,{children:"Lors de l'ex\xe9cution de commandes DVS dans un contexte non-interactif (scripts, t\xe2ches cron, assistants IA comme Cursor ou Claude Code), vous pouvez rencontrer cette erreur :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"the input device is not a TTY\n"})}),"\n",(0,t.jsx)(n.p,{children:"Cela se produit car les commandes DVS tentent d'allouer un pseudo-TTY pour les fonctionnalit\xe9s interactives, mais aucun TTY n'est disponible dans ces contextes."}),"\n",(0,t.jsx)(n.h2,{id:"solution--dvs_no_tty",children:"Solution : DVS_NO_TTY"}),"\n",(0,t.jsxs)(n.p,{children:["D\xe9finissez la variable d'environnement ",(0,t.jsx)(n.code,{children:"DVS_NO_TTY"})," pour d\xe9sactiver l'allocation TTY :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"DVS_NO_TTY=1 dvs php bin/console cache:clear\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ce-que-\xe7a-fait",children:"Ce que \xe7a fait"}),"\n",(0,t.jsxs)(n.p,{children:["Quand ",(0,t.jsx)(n.code,{children:"DVS_NO_TTY"})," est d\xe9fini (n'importe quelle valeur non vide) :"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["D\xe9sactive les flags ",(0,t.jsx)(n.code,{children:"-it"})," sur les commandes Docker exec (pas d'allocation TTY)"]}),"\n",(0,t.jsxs)(n.li,{children:["D\xe9finit ",(0,t.jsx)(n.code,{children:"INTERACTIVE=0"})," (d\xe9sactive les prompts interactifs)"]}),"\n",(0,t.jsx)(n.li,{children:"D\xe9sactive l'affichage du footer"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"priorit\xe9-de-d\xe9tection",children:"Priorit\xe9 de d\xe9tection"}),"\n",(0,t.jsx)(n.p,{children:"DVS d\xe9tecte automatiquement le contexte d'ex\xe9cution :"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Contexte"}),(0,t.jsx)(n.th,{children:"TTY disponible"}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"DVS_NO_TTY"})}),(0,t.jsx)(n.th,{children:"R\xe9sultat"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Terminal interactif"}),(0,t.jsx)(n.td,{children:"Oui"}),(0,t.jsx)(n.td,{children:"Non d\xe9fini"}),(0,t.jsx)(n.td,{children:"Mode interactif complet"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Script/pipe"}),(0,t.jsx)(n.td,{children:"Non"}),(0,t.jsx)(n.td,{children:"Non d\xe9fini"}),(0,t.jsx)(n.td,{children:"Auto non-interactif"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Tout contexte"}),(0,t.jsx)(n.td,{children:"Quelconque"}),(0,t.jsx)(n.td,{children:"D\xe9fini"}),(0,t.jsx)(n.td,{children:"Non-interactif forc\xe9"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-des-alias",children:"Configuration des alias"}),"\n",(0,t.jsxs)(n.p,{children:["Pour plus de commodit\xe9, cr\xe9ez des alias dans votre configuration shell (",(0,t.jsx)(n.code,{children:"~/.bashrc"}),", ",(0,t.jsx)(n.code,{children:"~/.zshrc"}),") :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# DVS standard (interactif)\nalias dvs='dvs'\n\n# DVS pour scripts et outils IA (non-interactif)\nalias dvs-script='DVS_NO_TTY=1 dvs'\nalias dvs-ai='DVS_NO_TTY=1 dvs'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Puis rechargez votre shell :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source ~/.zshrc  # ou ~/.bashrc\n"})}),"\n",(0,t.jsx)(n.h3,{id:"exemples-dutilisation",children:"Exemples d'utilisation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Utilisation interactive (par d\xe9faut)\ndvs shell\ndvs php bin/console\n\n# Utilisation script/IA (non-interactive)\ndvs-script php bin/console cache:clear\ndvs-ai composer install\n"})}),"\n",(0,t.jsx)(n.h2,{id:"outils-de-d\xe9veloppement-ia",children:"Outils de d\xe9veloppement IA"}),"\n",(0,t.jsx)(n.h3,{id:"cursor--claude-code",children:"Cursor / Claude Code"}),"\n",(0,t.jsx)(n.p,{children:"Lors de l'utilisation d'assistants IA avec des capacit\xe9s terminal limit\xe9es :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Dans le terminal de votre outil IA\nDVS_NO_TTY=1 dvs php bin/console cache:clear\nDVS_NO_TTY=1 dvs exec npm run build\n"})}),"\n",(0,t.jsx)(n.h3,{id:"pipelines-cicd",children:"Pipelines CI/CD"}),"\n",(0,t.jsxs)(n.p,{children:["Pour les pipelines automatis\xe9s, utilisez ",(0,t.jsx)(n.code,{children:"DVS_NO_TTY"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# Exemple GitHub Actions\n- name: Clear cache\n  run: DVS_NO_TTY=1 dvs php bin/console cache:clear\n\n# Exemple GitLab CI\ndeploy:\n  script:\n    - DVS_NO_TTY=1 dvs composer install --no-dev\n"})}),"\n",(0,t.jsx)(n.h2,{id:"bonnes-pratiques",children:"Bonnes pratiques"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Utilisez ",(0,t.jsx)(n.code,{children:"--force"})," ou ",(0,t.jsx)(n.code,{children:"--yes"})]})," pour les commandes DVS n\xe9cessitant une confirmation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"V\xe9rifiez les codes de sortie"})," dans les scripts pour d\xe9tecter les \xe9checs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Utilisez la sortie ",(0,t.jsx)(n.code,{children:"--json"})]})," lors de l'analyse programmatique de la sortie DVS"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Obtenir les infos app en JSON\nDVS_NO_TTY=1 dvs info --json | jq '.name'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"flags-des-outils-externes",children:"Flags des outils externes"}),"\n",(0,t.jsxs)(n.p,{children:["Certains outils ex\xe9cut\xe9s via DVS ont leurs propres flags non-interactifs. Ce ne sont ",(0,t.jsx)(n.strong,{children:"pas des flags DVS"})," mais des flags pass\xe9s \xe0 l'outil sous-jacent :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Flag --no-interaction de Composer\nDVS_NO_TTY=1 dvs composer install --no-interaction\n\n# Flag --no-interaction de Symfony Console\nDVS_NO_TTY=1 dvs php bin/console doctrine:migrations:migrate --no-interaction\n\n# Flag --force d'Artisan\nDVS_NO_TTY=1 dvs php artisan migrate --force\n"})}),"\n",(0,t.jsx)(n.h2,{id:"d\xe9pannage",children:"D\xe9pannage"}),"\n",(0,t.jsx)(n.h3,{id:"la-commande-se-bloque-",children:"La commande se bloque ?"}),"\n",(0,t.jsx)(n.p,{children:"La commande attend peut-\xeatre une entr\xe9e de l'outil sous-jacent. Ajoutez le flag non-interactif appropri\xe9 pour cet outil :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Composer\nDVS_NO_TTY=1 dvs composer install --no-interaction\n\n# Console Symfony/PrestaShop\nDVS_NO_TTY=1 dvs console cache:clear --no-interaction\n\n# WP-CLI (g\xe9n\xe9ralement non-interactif par d\xe9faut)\nDVS_NO_TTY=1 dvs wp plugin list\n"})}),"\n",(0,t.jsx)(n.h3,{id:"besoin-de-couleurs-dans-la-sortie-",children:"Besoin de couleurs dans la sortie ?"}),"\n",(0,t.jsxs)(n.p,{children:["Quand ",(0,t.jsx)(n.code,{children:"DVS_NO_TTY"})," est d\xe9fini, les couleurs sont d\xe9sactiv\xe9es. Si vous avez besoin de couleurs dans un contexte de script o\xf9 un vrai TTY est disponible, ne d\xe9finissez pas ",(0,t.jsx)(n.code,{children:"DVS_NO_TTY"})," et laissez DVS auto-d\xe9tecter."]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);